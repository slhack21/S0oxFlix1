<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>S0oxFlix - Film</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root { --bg:#0b0616; --card:#1a0d33; --accent:#6a1b9a; --text:#e0d0ff; --hover:#9c27b0; }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background:var(--bg); color:var(--text); font-family:'Segoe UI',Arial,sans-serif; }
    header { background:var(--accent); padding:20px; text-align:center; font-size:1.8rem; color:white; position:relative; }
    .back { position:absolute; left:20px; top:20px; background:var(--accent); color:white; border:none; padding:10px; border-radius:50%; cursor:pointer; font-size:1.2rem; }
    .container { max-width:1200px; margin:20px auto; padding:20px; display:flex; gap:25px; }
    .poster { width:320px; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,0.6); }
    .info { flex:1; }
    .title { font-size:2.4rem; color:var(--accent); margin-bottom:8px; }
    .meta { color:#ccc; margin-bottom:15px; }
    .synopsis { line-height:1.7; color:#ddd; margin-bottom:25px; }
    .player { background:var(--card); border-radius:16px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.5); position:relative; }
    .player-header { background:var(--accent); color:white; padding:14px 20px; font-weight:bold; display:flex; justify-content:space-between; align-items:center; }
    iframe { width:100%; height:520px; border:none; }
    .loading { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:#aaa; font-size:1.2rem; }
    .loading i { font-size:2rem; color:var(--hover); animation:spin 1s linear infinite; display:block; margin-bottom:10px; }
    @keyframes spin { from { transform:rotate(0deg); } to { transform:rotate(360deg); } }
    @media (max-width:768px){ .container { flex-direction:column; } .poster { width:100%; } iframe { height:300px; } }
  </style>
</head>
<body>

  <header><h1>S0oxFlix</h1></header>
  <button class="back" onclick="history.back()">Retour</button>

  <div class="container" id="content">
    <div class="loading"><i class="fas fa-spinner"></i><br>Chargement...</div>
  </div>

  <script>
    const API_KEY = '6c2b12d2fa62845b21cd9bb35c1959b0'; // ← TMDB API (garde-la)
    const urlParams = new URLSearchParams(window.location.search);
    const movieId = urlParams.get('id');

    if (!movieId) {
      document.body.innerHTML = '<p style="text-align:center;color:#f66;padding:50px;">ID manquant</p>';
    }

    async function loadMovie() {
      const res = await fetch(`https://api.themoviedb.org/3/movie/${movieId}?api_key=${API_KEY}&language=fr-FR`);
      const m = await res.json();

      const embed = `https://multiembed.mov/?video_id=${movieId}&tmdb=1&autoplay=1`;

      document.getElementById('content').innerHTML = `
        <img src="https://image.tmdb.org/t/p/w500${m.poster_path}" class="poster">
        <div class="info">
          <h1 class="title">${m.title}</h1>
          <div class="meta">⭐ ${m.vote_average?.toFixed(1)} | ${m.release_date?.split('-')[0] || 'N/A'}</div>
          <p class="synopsis">${m.overview || 'Aucun synopsis.'}</p>
          <div class="player">
            <div class="player-header">
              <span>Lecture : ${m.title}</span>
              <button onclick="document.querySelector('iframe').src=''" style="background:none;color:white;border:none;font-size:1.5rem;cursor:pointer;">X</button>
            </div>
            <iframe src="${embed}" allowfullscreen allow="autoplay; fullscreen"></iframe>
          </div>
        </div>
      `;
    }

    loadMovie();
  </script>
</body>
</html>
